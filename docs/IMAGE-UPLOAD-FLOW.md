# Image Upload Flow Diagram

## Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKOFFICE (Nuxt 4)                         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ProductForm.vue (Component)                             â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  State:                                                   â”‚ â”‚
â”‚  â”‚  - imageFiles: ref<File[]>([])                          â”‚ â”‚
â”‚  â”‚  - imagePreviews: ref<string[]>([])                     â”‚ â”‚
â”‚  â”‚  - validationErrors: ref<Record<string, string>>({})    â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Methods:                                                 â”‚ â”‚
â”‚  â”‚  - handleFileChange(event) â†’ validates â†’ adds files     â”‚ â”‚
â”‚  â”‚  - validateFile(file) â†’ returns error | null            â”‚ â”‚
â”‚  â”‚  - removeImage(index) â†’ removes file & preview          â”‚ â”‚
â”‚  â”‚  - handleSubmit() â†’ calls composable                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  useProducts.ts (Composable)                             â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  createProductWithImages(dto, files) {                   â”‚ â”‚
â”‚  â”‚    const formData = new FormData()                       â”‚ â”‚
â”‚  â”‚    formData.append('name', dto.name)                     â”‚ â”‚
â”‚  â”‚    formData.append('price', dto.price.toString())        â”‚ â”‚
â”‚  â”‚    formData.append('dimensions', JSON.stringify(...))    â”‚ â”‚
â”‚  â”‚    files.forEach(f => formData.append('images', f))      â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚    return fetch('/api/products/with-upload', {           â”‚ â”‚
â”‚  â”‚      method: 'POST',                                     â”‚ â”‚
â”‚  â”‚      body: formData                                      â”‚ â”‚
â”‚  â”‚    })                                                     â”‚ â”‚
â”‚  â”‚  }                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                    HTTP POST (multipart/form-data)
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (NestJS)                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ProductsController                                       â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  @Post('with-upload')                                     â”‚ â”‚
â”‚  â”‚  @UseInterceptors(FilesInterceptor('images', 5, {...}))  â”‚ â”‚
â”‚  â”‚  async createWithUpload(                                  â”‚ â”‚
â”‚  â”‚    @Body() dto: CreateProductDto,                        â”‚ â”‚
â”‚  â”‚    @UploadedFiles() files: Express.Multer.File[]         â”‚ â”‚
â”‚  â”‚  ) {                                                      â”‚ â”‚
â”‚  â”‚    // Validate files                                     â”‚ â”‚
â”‚  â”‚    // Process uploads                                    â”‚ â”‚
â”‚  â”‚    // Create product with image URLs                     â”‚ â”‚
â”‚  â”‚  }                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ProductsService                                          â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  create(dto, imageUrls) {                                â”‚ â”‚
â”‚  â”‚    return this.productRepository.save({                  â”‚ â”‚
â”‚  â”‚      ...dto,                                             â”‚ â”‚
â”‚  â”‚      images: imageUrls                                   â”‚ â”‚
â”‚  â”‚    })                                                     â”‚ â”‚
â”‚  â”‚  }                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  TypeORM â†’ PostgreSQL                                     â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  INSERT INTO products (                                   â”‚ â”‚
â”‚  â”‚    name, price, category, images, ...                    â”‚ â”‚
â”‚  â”‚  ) VALUES (                                               â”‚ â”‚
â”‚  â”‚    'Product Name',                                        â”‚ â”‚
â”‚  â”‚    149.99,                                                â”‚ â”‚
â”‚  â”‚    'wall-hanging',                                        â”‚ â”‚
â”‚  â”‚    ARRAY['url1.jpg', 'url2.jpg']                         â”‚ â”‚
â”‚  â”‚  )                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                        Response
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  {                                                              â”‚
â”‚    "id": "uuid-here",                                           â”‚
â”‚    "name": "Product Name",                                      â”‚
â”‚    "images": [                                                  â”‚
â”‚      "http://localhost:4000/uploads/product-uuid-1.jpg",       â”‚
â”‚      "http://localhost:4000/uploads/product-uuid-2.jpg"        â”‚
â”‚    ],                                                           â”‚
â”‚    "price": "149.99",                                           â”‚
â”‚    "category": "wall-hanging",                                  â”‚
â”‚    ...                                                          â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## User Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USER ACTIONS                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Click "Add Product"    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Product Form Opens     â”‚
              â”‚  (Side Sheet/Modal)     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Fill Required Fields:               â”‚
         â”‚  - Name: "Handwoven Wall Hanging"    â”‚
         â”‚  - Price: 149.99                     â”‚
         â”‚  - Category: Wall Hanging            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Click "Upload Images"  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  File Picker Opens      â”‚
              â”‚  (OS Native Dialog)     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Select Files:                       â”‚
         â”‚  âœ“ image1.jpg (2.3 MB)              â”‚
         â”‚  âœ“ image2.png (1.8 MB)              â”‚
         â”‚  âœ“ image3.webp (950 KB)             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  CLIENT-SIDE VALIDATION                       â”‚
    â”‚                                               â”‚
    â”‚  For each file:                               â”‚
    â”‚  1. Check type (JPEG/PNG/WebP) â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚  2. Check size (â‰¤ 5MB)         â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”   â”‚
    â”‚  3. Check total count (â‰¤ 5)    â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â” â”‚
    â”‚                                 â†“      â†“  â†“ â†“ â”‚
    â”‚                              [Validation]    â”‚
    â”‚                                 â”‚             â”‚
    â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚                    â–¼                       â–¼ â”‚
    â”‚              [âœ… VALID]              [âŒ ERROR]â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                â”‚
             â–¼                                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Generate       â”‚           â”‚ Show Error:          â”‚
    â”‚ Previews       â”‚           â”‚ "File size exceeds   â”‚
    â”‚ (FileReader)   â”‚           â”‚  5MB limit"          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                â”‚
             â–¼                                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  [User fixes]
    â”‚ Display        â”‚                        â”‚
    â”‚ Preview Grid:  â”‚                        â–¼
    â”‚                â”‚              [Retry with valid files]
    â”‚ â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”    â”‚                        â”‚
    â”‚ â”‚ 1  â”‚ 2  â”‚    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤    â”‚
    â”‚ â”‚ 3  â”‚ âŠ¡  â”‚    â”‚
    â”‚ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜    â”‚
    â”‚                â”‚
    â”‚ Image 1        â”‚
    â”‚ 2.3 MB     [X] â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    [User reviews images]
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Optional:      â”‚
    â”‚ Remove image 2 â”‚â—„â”€â”€â”€â”
    â”‚ (Click X)      â”‚    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
             â”‚            â”‚
             â–¼            â”‚
    [Image removed]       â”‚
             â”‚            â”‚
             â–¼            â”‚
    [Empty slot appears]  â”‚
             â”‚            â”‚
             â–¼            â”‚
    [Can add more] â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Fill Optional: â”‚
    â”‚ - Description  â”‚
    â”‚ - Materials    â”‚
    â”‚ - Dimensions   â”‚
    â”‚ - Stock        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Click "Create  â”‚
    â”‚ Product"       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ FORM           â”‚
    â”‚ VALIDATION     â”‚
    â”‚                â”‚
    â”‚ âœ“ Name filled  â”‚
    â”‚ âœ“ Price > 0    â”‚
    â”‚ âœ“ Images â‰¥ 1   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Build FormData â”‚
    â”‚                â”‚
    â”‚ + name         â”‚
    â”‚ + price        â”‚
    â”‚ + category     â”‚
    â”‚ + images (Ã—3)  â”‚
    â”‚ + dimensions   â”‚
    â”‚ + ...          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ HTTP POST      â”‚
    â”‚ multipart/     â”‚
    â”‚ form-data      â”‚
    â”‚                â”‚
    â”‚ [Loading...]   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ BACKEND PROCESSING  â”‚
    â”‚                     â”‚
    â”‚ 1. Parse FormData   â”‚
    â”‚ 2. Validate DTO     â”‚
    â”‚ 3. Save files       â”‚
    â”‚ 4. Create product   â”‚
    â”‚ 5. Insert DB        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RESPONSE            â”‚
    â”‚                     â”‚
    â”‚ 201 Created         â”‚
    â”‚ {                   â”‚
    â”‚   id: "uuid",       â”‚
    â”‚   images: [...]     â”‚
    â”‚ }                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SUCCESS UI          â”‚
    â”‚                     â”‚
    â”‚ âœ… Product created  â”‚
    â”‚    successfully!    â”‚
    â”‚                     â”‚
    â”‚ [Redirecting...]    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Form closes         â”‚
    â”‚ Products list       â”‚
    â”‚ refreshes           â”‚
    â”‚ New product visible â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
         [COMPLETE]
```

---

## Validation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FILE VALIDATION CHAIN                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   User selects      â”‚
                 â”‚   file(s)           â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  For each file in selection:           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Check 1: File Type                    â”‚
        â”‚  --------------------------------      â”‚
        â”‚  Is file.type in ALLOWED_TYPES?        â”‚
        â”‚  ['image/jpeg', 'image/png',           â”‚
        â”‚   'image/webp']                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                 â–¼
               [âœ… YES]           [âŒ NO]
                    â”‚                 â”‚
                    â”‚                 â–¼
                    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     â”‚ Return error:          â”‚
                    â”‚     â”‚ "Invalid file type.    â”‚
                    â”‚     â”‚  Allowed: JPEG, PNG,   â”‚
                    â”‚     â”‚  WebP"                 â”‚
                    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                 â”‚
                    â”‚                 â–¼
                    â”‚            [STOP âŠ—]
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Check 2: File Size                    â”‚
        â”‚  --------------------------------      â”‚
        â”‚  Is file.size â‰¤ MAX_FILE_SIZE?         â”‚
        â”‚  (5 * 1024 * 1024 = 5MB)               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                 â–¼
               [âœ… YES]           [âŒ NO]
                    â”‚                 â”‚
                    â”‚                 â–¼
                    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     â”‚ Return error:          â”‚
                    â”‚     â”‚ "File size exceeds     â”‚
                    â”‚     â”‚  5MB limit"            â”‚
                    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                 â”‚
                    â”‚                 â–¼
                    â”‚            [STOP âŠ—]
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  âœ… File is VALID                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Add to validFiles array               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  After all files checked:              â”‚
        â”‚  --------------------------------      â”‚
        â”‚  Check 3: Total Count                  â”‚
        â”‚  imageFiles.length + validFiles.length â”‚
        â”‚  â‰¤ MAX_IMAGES (5)?                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                 â–¼
               [âœ… YES]           [âŒ NO]
                    â”‚                 â”‚
                    â”‚                 â–¼
                    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     â”‚ Show error:            â”‚
                    â”‚     â”‚ "Maximum 5 images      â”‚
                    â”‚     â”‚  allowed. You've       â”‚
                    â”‚     â”‚  selected X images."   â”‚
                    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                 â”‚
                    â”‚                 â–¼
                    â”‚        [Clear selection]
                    â”‚                 â”‚
                    â”‚                 â–¼
                    â”‚            [STOP âŠ—]
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  âœ… ALL CHECKS PASSED                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Add files to imageFiles.value         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Generate previews (FileReader)        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Update UI (show previews)             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                      [COMPLETE âœ“]
```

---

## Data Transformation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 FRONTEND â†’ BACKEND TRANSFORMATION              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: User Input (Frontend)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{
  // Form Fields
  name: "Handwoven Wall Hanging"
  description: "Beautiful handcrafted piece"
  category: "wall-hanging"
  price: 149.99
  status: "available"
  stockQuantity: 5
  materials: "Cotton, wool"

  // Dimensions Object
  dimensions: {
    width: 50,
    height: 70,
    unit: "cm"
  }

  // File Objects (not in DTO)
  imageFiles: [
    File {name: "hanging1.jpg", size: 2415870, type: "image/jpeg"},
    File {name: "hanging2.png", size: 1887436, type: "image/png"},
    File {name: "hanging3.webp", size: 971024, type: "image/webp"}
  ]
}

                    â”‚
                    â–¼

STEP 2: Build FormData (Adapter Pattern)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const formData = new FormData()

formData.append('name', 'Handwoven Wall Hanging')
formData.append('description', 'Beautiful handcrafted piece')
formData.append('category', 'wall-hanging')
formData.append('price', '149.99')                    // toString()
formData.append('status', 'available')
formData.append('stockQuantity', '5')                 // toString()
formData.append('materials', 'Cotton, wool')
formData.append('dimensions', '{"width":50,"height":70,"unit":"cm"}') // JSON
formData.append('images', File)                       // Binary
formData.append('images', File)                       // Binary
formData.append('images', File)                       // Binary

                    â”‚
                    â–¼

STEP 3: HTTP Request (multipart/form-data)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
POST /api/products/with-upload HTTP/1.1
Host: localhost:4000
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="name"

Handwoven Wall Hanging
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="price"

149.99
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="dimensions"

{"width":50,"height":70,"unit":"cm"}
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="images"; filename="hanging1.jpg"
Content-Type: image/jpeg

[BINARY DATA]
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="images"; filename="hanging2.png"
Content-Type: image/png

[BINARY DATA]
------WebKitFormBoundary7MA4YWxkTrZu0gW--

                    â”‚
                    â–¼

STEP 4: Backend Processing (NestJS)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
@Body() dto: CreateProductDto
{
  name: 'Handwoven Wall Hanging',
  description: 'Beautiful handcrafted piece',
  category: 'wall-hanging',
  price: 149.99,                              // Parsed to number
  status: 'available',
  stockQuantity: 5,                           // Parsed to number
  materials: 'Cotton, wool',
  dimensions: {                               // Parsed from JSON
    width: 50,
    height: 70,
    unit: 'cm'
  }
}

@UploadedFiles() files: Express.Multer.File[]
[
  {
    fieldname: 'images',
    originalname: 'hanging1.jpg',
    encoding: '7bit',
    mimetype: 'image/jpeg',
    buffer: <Buffer ...>,
    size: 2415870
  },
  {
    fieldname: 'images',
    originalname: 'hanging2.png',
    encoding: '7bit',
    mimetype: 'image/png',
    buffer: <Buffer ...>,
    size: 1887436
  },
  ...
]

                    â”‚
                    â–¼

STEP 5: File Storage
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Save files to: /uploads/
- product-uuid-1234567890-1.jpg
- product-uuid-1234567890-2.png
- product-uuid-1234567890-3.webp

Generate URLs:
[
  "http://localhost:4000/uploads/product-uuid-1234567890-1.jpg",
  "http://localhost:4000/uploads/product-uuid-1234567890-2.png",
  "http://localhost:4000/uploads/product-uuid-1234567890-3.webp"
]

                    â”‚
                    â–¼

STEP 6: Database Insert (PostgreSQL)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
INSERT INTO products (
  id,
  name,
  description,
  category,
  price,
  status,
  stock_quantity,
  materials,
  dimensions,
  images,
  created_at,
  updated_at
) VALUES (
  'uuid-generated-here',
  'Handwoven Wall Hanging',
  'Beautiful handcrafted piece',
  'wall-hanging',
  149.99,                                     -- DECIMAL
  'available',
  5,
  'Cotton, wool',
  '{"width":50,"height":70,"unit":"cm"}',   -- JSONB
  ARRAY[                                      -- TEXT[]
    'http://localhost:4000/uploads/product-uuid-1234567890-1.jpg',
    'http://localhost:4000/uploads/product-uuid-1234567890-2.png',
    'http://localhost:4000/uploads/product-uuid-1234567890-3.webp'
  ],
  NOW(),
  NOW()
);

                    â”‚
                    â–¼

STEP 7: Response (JSON)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
HTTP/1.1 201 Created
Content-Type: application/json

{
  "id": "uuid-generated-here",
  "name": "Handwoven Wall Hanging",
  "description": "Beautiful handcrafted piece",
  "category": "wall-hanging",
  "price": "149.99",                          // String (PostgreSQL decimal)
  "status": "available",
  "stockQuantity": 5,
  "materials": "Cotton, wool",
  "dimensions": {
    "width": 50,
    "height": 70,
    "unit": "cm"
  },
  "images": [
    "http://localhost:4000/uploads/product-uuid-1234567890-1.jpg",
    "http://localhost:4000/uploads/product-uuid-1234567890-2.png",
    "http://localhost:4000/uploads/product-uuid-1234567890-3.webp"
  ],
  "createdAt": "2024-01-15T10:30:00.000Z",
  "updatedAt": "2024-01-15T10:30:00.000Z"
}

                    â”‚
                    â–¼

STEP 8: Frontend Update
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- Show success message
- Refresh products list
- Close form modal
- New product appears in list with image thumbnails
```

---

## Design Patterns Applied

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             DESIGN PATTERNS IN IMAGE UPLOAD                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ADAPTER PATTERN
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Problem: Browser File API â‰  Backend multipart/form-data
   Solution: createProductWithImages() adapts File[] â†’ FormData

   [File Objects] â”€â”€â”
                    â”‚ Adapter
   [Product DTO] â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â†’ [FormData] â”€â”€â†’ [Backend]
                    â”‚
   [Dimensions] â”€â”€â”€â”€â”˜

2. BUILDER PATTERN
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Problem: Complex FormData construction with many fields
   Solution: Progressive building with conditional fields

   const formData = new FormData()
   formData.append('name', ...)       â† Step 1
   formData.append('price', ...)      â† Step 2
   if (description)                   â† Step 3 (conditional)
     formData.append('description', ...)
   if (dimensions)                    â† Step 4 (conditional)
     formData.append('dimensions', JSON.stringify(...))
   files.forEach(...)                 â† Step 5 (loop)

3. CHAIN OF RESPONSIBILITY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Problem: Multiple validation rules for files
   Solution: Sequential validators that pass or fail

   validateFile(file)
     â”œâ”€â†’ Check type â”€â”€â†’ [FAIL?] â†’ Return error
     â”‚                   [PASS] â†“
     â””â”€â†’ Check size â”€â”€â†’ [FAIL?] â†’ Return error
                        [PASS] â†“
                        Return null (valid)

4. DECORATOR PATTERN
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Problem: Basic file input needs enhanced behavior
   Solution: Wrap with validation, preview, error handling

   Basic Input
       â”‚
       â–¼
   [handleFileChange] â”€â”
       â”‚               â”‚ + Validation
       â”‚               â”‚ + Preview generation
       â”‚               â”‚ + Error handling
       â”‚               â”‚ + State updates
       â–¼               â”‚
   Enhanced Input â—„â”€â”€â”€â”€â”˜

5. STRATEGY PATTERN
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Problem: Different handling for different file types/scenarios
   Solution: Pluggable strategies for file processing

   Strategy Interface: Process file â†’ Generate preview
     â”‚
     â”œâ”€â†’ JPEG Strategy: FileReader.readAsDataURL()
     â”œâ”€â†’ PNG Strategy:  FileReader.readAsDataURL()
     â””â”€â†’ WebP Strategy: FileReader.readAsDataURL()

   (Could be extended for:)
     â”œâ”€â†’ Compression Strategy
     â”œâ”€â†’ Resize Strategy
     â””â”€â†’ Format Conversion Strategy
```

---

This flow diagram provides a complete visual understanding of the image upload feature from user interaction to database storage! ğŸš€
